{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/jeeva/OneDrive/Documents/Shopwise/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/payment.service\";\nimport * as i2 from \"src/app/services/paypal-script.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nconst _c0 = [\"paymentRef\"];\nfunction PaymentComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"h2\", 8);\n    i0.ɵɵtext(2, \"Payee Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\")(4, \"strong\");\n    i0.ɵɵtext(5, \"Transaction ID:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\")(8, \"strong\");\n    i0.ɵɵtext(9, \"Payer ID:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\")(12, \"strong\");\n    i0.ɵɵtext(13, \"Status:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"p\")(16, \"strong\");\n    i0.ɵɵtext(17, \"Name:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"p\")(20, \"strong\");\n    i0.ɵɵtext(21, \"Email:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"p\")(24, \"strong\");\n    i0.ɵɵtext(25, \"Payer Email:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function PaymentComponent_div_10_Template_button_click_27_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.closePayeeDetailsPopup());\n    });\n    i0.ɵɵtext(28, \"OK\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.payeeDetails == null ? null : ctx_r0.payeeDetails.transactionId, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.payeeDetails == null ? null : ctx_r0.payeeDetails.payerId, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.payeeDetails == null ? null : ctx_r0.payeeDetails.status, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.payeeDetails == null ? null : ctx_r0.payeeDetails.payeeName, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.payeeDetails == null ? null : ctx_r0.payeeDetails.email, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.payeeDetails == null ? null : ctx_r0.payeeDetails.payerEmail, \"\");\n  }\n}\nexport class PaymentComponent {\n  constructor(paymentService, paypalScriptService, router) {\n    this.paymentService = paymentService;\n    this.paypalScriptService = paypalScriptService;\n    this.router = router;\n    this.isPayeeDetailsPopupVisible = false;\n    this.payeeDetails = null;\n  }\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      yield _this.paypalScriptService.loadPayPalScript();\n      yield _this.paymentService.initializePayPalButton(() => {}, () => {\n        console.log(\"Payment error\");\n        // Add any additional logic for payment error\n      });\n      // Type assertion to inform TypeScript that 'paypal' exists\n      const paypal = window.paypal;\n      paypal.Buttons({\n        style: {\n          layout: \"vertical\",\n          color: \"blue\",\n          shape: \"rect\",\n          label: \"paypal\"\n        },\n        createOrder: (data, actions) => {\n          return actions.order.create({\n            purchase_units: [{\n              amount: {\n                value: \"50\",\n                currency_code: \"USD\"\n              }\n            }]\n          });\n        },\n        onApprove: (data, actions) => {\n          return actions.order.capture().then(details => {\n            if (details.status === \"COMPLETED\") {\n              const payeeDetails = {\n                transactionId: details.id,\n                payerId: details.payer.payer_id,\n                status: details.status,\n                payeeName: details.payer.name.given_name,\n                email: details.purchase_units[0].payee.email_address,\n                payerEmail: details.payer.email_address\n              };\n              // Display the details in a popup\n              _this.showPayeeDetailsPopup(payeeDetails);\n            }\n          });\n        },\n        onError: error => {\n          console.log(error);\n        }\n      }).render(\"#paypal-button-container\");\n      console.log(window.paypal);\n    })();\n  }\n  showPayeeDetailsPopup(payeeDetails) {\n    // Logic to display a popup with CSS styling\n    // You can use a library like Angular Material Dialog or create a custom modal component\n    // For simplicity, let's assume you have a variable to control the visibility of the popup\n    this.isPayeeDetailsPopupVisible = true;\n    this.payeeDetails = payeeDetails;\n  }\n  closePayeeDetailsPopup() {\n    this.isPayeeDetailsPopupVisible = false;\n    // Additional logic, if needed, before navigating to the home page\n    this.goTohome();\n  }\n  goTohome() {\n    this.router.navigate([\"/\"]); // Assuming '/' is the route path for your home page\n  }\n}\n\nPaymentComponent.ɵfac = function PaymentComponent_Factory(t) {\n  return new (t || PaymentComponent)(i0.ɵɵdirectiveInject(i1.PaymentService), i0.ɵɵdirectiveInject(i2.PayPalScriptService), i0.ɵɵdirectiveInject(i3.Router));\n};\nPaymentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PaymentComponent,\n  selectors: [[\"app-payment\"]],\n  viewQuery: function PaymentComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paymentRef = _t.first);\n    }\n  },\n  decls: 11,\n  vars: 1,\n  consts: [[\"lang\", \"en\"], [\"charset\", \"utf-8\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1\"], [\"href\", \"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\", \"rel\", \"stylesheet\", \"integrity\", \"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\", \"crossorigin\", \"anonymous\"], [1, \"content-wrapper\"], [\"id\", \"paypal-button-container\", 1, \"mb-4\"], [\"class\", \"payee-details-popup\", 4, \"ngIf\"], [1, \"payee-details-popup\"], [1, \"popup-title\"], [1, \"btn\", \"btn-primary\", \"btn-close-popup\", 3, \"click\"]],\n  template: function PaymentComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"html\", 0)(1, \"head\");\n      i0.ɵɵelement(2, \"meta\", 1)(3, \"meta\", 2);\n      i0.ɵɵelementStart(4, \"title\");\n      i0.ɵɵtext(5, \"Payment\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(6, \"link\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"body\")(8, \"div\", 4);\n      i0.ɵɵelement(9, \"div\", 5);\n      i0.ɵɵtemplate(10, PaymentComponent_div_10_Template, 29, 6, \"div\", 6);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngIf\", ctx.isPayeeDetailsPopupVisible);\n    }\n  },\n  dependencies: [i4.NgIf],\n  styles: [\".payee-details-popup[_ngcontent-%COMP%] {\\r\\n  position: left;\\r\\n  top: 50%;\\r\\n  left: 50%;\\r\\n  transform: translate(-50%, -50%);\\r\\n  background-color: white;\\r\\n  padding: 20px;\\r\\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvcGF5bWVudC9wYXltZW50LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFjO0VBQ2QsUUFBUTtFQUNSLFNBQVM7RUFDVCxnQ0FBZ0M7RUFDaEMsdUJBQXVCO0VBQ3ZCLGFBQWE7RUFDYix3Q0FBd0M7QUFDMUMiLCJzb3VyY2VzQ29udGVudCI6WyIucGF5ZWUtZGV0YWlscy1wb3B1cCB7XHJcbiAgcG9zaXRpb246IGxlZnQ7XHJcbiAgdG9wOiA1MCU7XHJcbiAgbGVmdDogNTAlO1xyXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gIHBhZGRpbmc6IDIwcHg7XHJcbiAgYm94LXNoYWRvdzogMCA0cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcclxufSJdLCJzb3VyY2VSb290IjoiIn0= */\", \"body[_ngcontent-%COMP%], html[_ngcontent-%COMP%] {\\n        height: 100%;\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        background-color: #f8f9fa;\\n        margin: 0;\\n      }\\n      .content-wrapper[_ngcontent-%COMP%] {\\n        width: 100%;\\n        max-width: 600px;\\n        padding: 20px;\\n        background-color: #fff;\\n        border-radius: 10px;\\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\\n        text-align: center;\\n      }\\n      .header-title[_ngcontent-%COMP%] {\\n        color: #495057;\\n        margin-bottom: 20px;\\n      }\\n      .payee-details-popup[_ngcontent-%COMP%] {\\n        background-color: #f8f9fa;\\n        padding: 20px;\\n        border-radius: 8px;\\n        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);\\n      }\\n      .popup-title[_ngcontent-%COMP%] {\\n        color: #007bff;\\n        margin-bottom: 10px;\\n      }\\n      .payee-details-popup[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n        margin: 0;\\n        color: #6c757d;\\n      }\\n      .btn-close-popup[_ngcontent-%COMP%] {\\n        margin-top: 20px;\\n      }\"]\n});","map":{"version":3,"mappings":"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","names":["i0","PaymentComponent","constructor","paymentService","paypalScriptService","router","ngOnInit","loadPayPalScript","initializePayPalButton","console","log","paypal","window","Buttons","style","layout","color","shape","label","createOrder","data","actions","order","create","purchase_units","amount","value","currency_code","onApprove","capture","then","details","status","payeeDetails","transactionId","id","payerId","payer","payer_id","payeeName","name","given_name","email","payee","email_address","payerEmail","showPayeeDetailsPopup","onError","error","render","isPayeeDetailsPopupVisible","closePayeeDetailsPopup","goTohome","navigate","selectors","viewQuery"],"sourceRoot":"","sources":["C:\\Users\\jeeva\\OneDrive\\Documents\\Shopwise\\Frontend\\src\\app\\pages\\payment\\payment.component.html","C:\\Users\\jeeva\\OneDrive\\Documents\\Shopwise\\Frontend\\src\\app\\pages\\payment\\payment.component.ts"],"sourcesContent":["<!-- payment.component.html \n\n\n\n\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <title>Bootstrap demo</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\n  </head>\n  <body>\n    <h1>Hello, world!</h1>\n    \n<div id=\"paypal-button-container\"></div>\n\n\n<div #paymentRef></div>\n\n<div *ngIf=\"isPayeeDetailsPopupVisible\" class=\"payee-details-popup\">\n<h2>Payee Details</h2>\n<p>Transaction ID: {{ payeeDetails?.transactionId }}</p>\n<p>Payer ID: {{ payeeDetails?.payerId }}</p>\n<p>Status: {{ payeeDetails?.status }}</p>\n<p>Name: {{ payeeDetails?.payeeName }}</p>\n<p>Email: {{ payeeDetails?.email }}</p>\n<p>PayerEmail: {{ payeeDetails?.payerEmail }}</p>\n\n<button (click)=\"closePayeeDetailsPopup()\">OK</button>\n</div>\n\n    \n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n  </body>\n</html>\n\n\n\n-->\n<!-- payment.component.html --><!-- your.component.html --><!-- Add more details as needed -->\n\n\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <title>Payment</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\n    <style>\n      /* Center container */\n      body, html {\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        background-color: #f8f9fa;\n        margin: 0;\n      }\n      .content-wrapper {\n        width: 100%;\n        max-width: 600px;\n        padding: 20px;\n        background-color: #fff;\n        border-radius: 10px;\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n        text-align: center;\n      }\n      .header-title {\n        color: #495057;\n        margin-bottom: 20px;\n      }\n      .payee-details-popup {\n        background-color: #f8f9fa;\n        padding: 20px;\n        border-radius: 8px;\n        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);\n      }\n      .popup-title {\n        color: #007bff;\n        margin-bottom: 10px;\n      }\n      .payee-details-popup p {\n        margin: 0;\n        color: #6c757d;\n      }\n      .btn-close-popup {\n        margin-top: 20px;\n      }\n    </style>\n  </head>\n  <body>\n    <div class=\"content-wrapper\">\n      <!--<h1 class=\"header-title\">Complete Your Payment</h1>\n\n       PayPal Button Container -->\n      <div id=\"paypal-button-container\" class=\"mb-4\"></div>\n\n      <!-- Payee Details Popup -->\n      <div *ngIf=\"isPayeeDetailsPopupVisible\" class=\"payee-details-popup\">\n        <h2 class=\"popup-title\">Payee Details</h2>\n        <p><strong>Transaction ID:</strong> {{ payeeDetails?.transactionId }}</p>\n        <p><strong>Payer ID:</strong> {{ payeeDetails?.payerId }}</p>\n        <p><strong>Status:</strong> {{ payeeDetails?.status }}</p>\n        <p><strong>Name:</strong> {{ payeeDetails?.payeeName }}</p>\n        <p><strong>Email:</strong> {{ payeeDetails?.email }}</p>\n        <p><strong>Payer Email:</strong> {{ payeeDetails?.payerEmail }}</p>\n        <button class=\"btn btn-primary btn-close-popup\" (click)=\"closePayeeDetailsPopup()\">OK</button>\n      </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\" crossorigin=\"anonymous\"></script>\n  </body>\n</html>\n","import { Component, ElementRef, OnInit, ViewChild } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { PayeeDetails } from \"../models/payeedetails.model\";\nimport { PayPalScriptService } from \"src/app/services/paypal-script.service\";\nimport { PaymentService } from \"src/app/services/payment.service\";\n\n// Declare global variable\ndeclare global {\n  interface Window {\n    paypal: any;\n  }\n}\n\n@Component({\n  selector: \"app-payment\",\n  templateUrl: \"./payment.component.html\",\n  styleUrls: [\"./payment.component.css\"],\n})\nexport class PaymentComponent implements OnInit {\n  @ViewChild(\"paymentRef\", { static: true }) paymentRef!: ElementRef;\n  isPayeeDetailsPopupVisible: boolean = false;\n  payeeDetails: PayeeDetails | null = null;\n\n  constructor(\n    private paymentService: PaymentService,\n    private paypalScriptService: PayPalScriptService,\n    private router: Router\n  ) {}\n\n  async ngOnInit(): Promise<void> {\n    await this.paypalScriptService.loadPayPalScript();\n    await this.paymentService.initializePayPalButton(\n      () => {},\n      () => {\n        console.log(\"Payment error\");\n        // Add any additional logic for payment error\n      }\n    );\n\n    // Type assertion to inform TypeScript that 'paypal' exists\n    const paypal = (window as any).paypal;\n\n    paypal\n      .Buttons({\n        style: {\n          layout: \"vertical\",\n          color: \"blue\",\n          shape: \"rect\",\n          label: \"paypal\",\n        },\n        createOrder: (data: any, actions: any) => {\n          return actions.order.create({\n            purchase_units: [\n              {\n                amount: {\n                  value: \"50\",\n                  currency_code: \"USD\",\n                },\n              },\n            ],\n          });\n        },\n        onApprove: (data: any, actions: any) => {\n          return actions.order.capture().then((details: any) => {\n            if (details.status === \"COMPLETED\") {\n              const payeeDetails: PayeeDetails = {\n                transactionId: details.id,\n                payerId: details.payer.payer_id,\n                status: details.status,\n                payeeName: details.payer.name.given_name,\n                email: details.purchase_units[0].payee.email_address,\n                payerEmail: details.payer.email_address,\n              };\n\n              // Display the details in a popup\n              this.showPayeeDetailsPopup(payeeDetails);\n            }\n          });\n        },\n        onError: (error: any) => {\n          console.log(error);\n        },\n      })\n      .render(\"#paypal-button-container\");\n\n    console.log((window as any).paypal);\n  }\n\n  showPayeeDetailsPopup(payeeDetails: PayeeDetails): void {\n    // Logic to display a popup with CSS styling\n    // You can use a library like Angular Material Dialog or create a custom modal component\n    // For simplicity, let's assume you have a variable to control the visibility of the popup\n    this.isPayeeDetailsPopupVisible = true;\n    this.payeeDetails = payeeDetails;\n  }\n\n  closePayeeDetailsPopup(): void {\n    this.isPayeeDetailsPopupVisible = false;\n    // Additional logic, if needed, before navigating to the home page\n    this.goTohome();\n  }\n\n  goTohome(): void {\n    this.router.navigate([\"/\"]); // Assuming '/' is the route path for your home page\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}